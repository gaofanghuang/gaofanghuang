{"id":"1546854563564","title":"Blog3.0æ”¹ç‰ˆè®°å½•\n","summary":"æ–°å¹´æ–°ç‰ˆæœ¬ï¼\n","tags":["æ”¹ç‰ˆ","blog","Vue","Koa"],"content":"# Blog3.0æ”¹ç‰ˆè®°å½•\n\n> æ–°å¹´æ–°ç‰ˆæœ¬ï¼\n\nè¿™æ¬¡ä½¿ç”¨äº†koa2é‡æ„åç«¯ç¨‹åºï¼Œå¹¶ä¸”å¢åŠ äº†æœ¬åœ°ä¸Šä¼ å›¾ç‰‡çš„åŠŸèƒ½ã€‚\n\nğŸ˜±ä¹‹å‰ç”¨ä¸ƒç‰›å¤–é“¾çš„å›¾ç‰‡å…¨éƒ¨æŒ‚äº†ï¼Œè¿˜æ˜¯æœ¬åœ°å­˜å›¾ä¿é™©ä¸€äº›ã€‚é‚£äº›æŒ‚æ‰çš„å›¾ç‰‡ï¼Œæ”¹èµ·æ¥å·¥ä½œé‡å¤ªå¤§äº†ï¼Œç­‰æœ‰ç©ºå†æ…¢æ…¢æƒ³åŠæ³•æ‰¾å›å§ğŸ˜“ã€‚\n\n## æ”¹ç‰ˆéœ€æ±‚\n\nè¿™æ˜¯ä¹‹å‰ 1.0, 2.0çš„æ”¹ç‰ˆè®°å½•:\n\n1. 1.0 https://huanggaofang.com/blog/detail/1515849780154\n\n2. 2.0 https://huanggaofang.com/blog/detail/1526809465617\n\n---\n\n3.0 éœ€æ±‚ï¼š\n\n1. æœ¬åœ°å­˜å›¾ï¼Œä¸åœ¨ä½¿ç”¨ç¬¬ä¸‰æ–¹å›¾åºŠäº† âˆš\n\n2. è¿›ä¸€æ­¥æ•´åˆç¼–è¾‘ä¸æŸ¥çœ‹åŠŸèƒ½ âˆš\n\n3. æŠŠä¸»ä»“åº“ä¸Blogä»“åº“åˆå¹¶ âˆš\n\n4. æ›´ç²¾ç®€çš„ä»£ç  âˆš\n\n5. é‡æ–°è®¾è®¡ä¸€å¥—å®Œæ•´çš„å›¾æ ‡\n\n6. Markdownè§£ææ ·å¼ä¼˜åŒ–\n\n7. è‡ªåŠ¨ä¿å­˜ç¼–è¾‘æ¡†çš„å†…å®¹åˆ°æœ¬åœ°\n\n--- \n\n## æ”¹ç‰ˆè¯´æ˜\n\n### æ—§ç‰ˆæˆªå›¾\n\n![1547547161389.png](http://localhost:9000/uploads/1547547161389.png)\n\n![1547547177270.png](http://localhost:9000/uploads/1547547177270.png)\n\nå› ä¸ºå›¾åºŠæŒ‚äº†ï¼Œæ‰¾ä¸åˆ°æ›´å¤šä»¥å‰çš„æˆªå›¾äº†ã€‚å¤§æ¦‚å°±æ˜¯è¿™ç§ç¨å¾®ç»šä¸½åšé‡ä¸€ç‚¹çš„é£æ ¼å§ã€‚\n\n### æ–°ç‰ˆæˆªå›¾\n\n*ç¼–è¾‘é¡µ*ï¼š\n\nPCç«¯ï¼š\n\n![1547546138450.png](http://localhost:9000/uploads/1547546138450.png)\n\n\nç§»åŠ¨ç«¯ï¼š\n\n![1547546226609.png](http://localhost:9000/uploads/1547546226609.png)\n\n\n*åˆ—è¡¨é¡µ*ï¼š\n\nPCç«¯:\n\n![1547546514546.png](http://localhost:9000/uploads/1547546514546.png)\n\n![1547546533287.png](http://localhost:9000/uploads/1547546533287.png)\n\nç§»åŠ¨ç«¯ï¼š\n\n![1547546844948.png](http://localhost:9000/uploads/1547546844948.png)\n\n![1547546856315.png](http://localhost:9000/uploads/1547546856315.png)\n\n\n*è¯¦æƒ…é¡µ*ï¼š\n\nPCç«¯ï¼š\n\n![1547546639604.png](http://localhost:9000/uploads/1547546639604.png)\n\n![1547546658890.png](http://localhost:9000/uploads/1547546658890.png)\n\nç§»åŠ¨ç«¯ï¼š\n\n![1547546682034.png](http://localhost:9000/uploads/1547546682034.png)\n\n![1547546693425.png](http://localhost:9000/uploads/1547546693425.png)\n\n![1547546704123.png](http://localhost:9000/uploads/1547546704123.png)\n\n\n### è®¾è®¡ç†å¿µ\n\n2018å¹´å‘ç”Ÿäº†è®¸å¤šäº‹æƒ…ï¼Œæ¢äº†ä¸€ä¸ªåŸå¸‚ï¼Œæ¢äº†ä¸€ä¸ªå…¬å¸ã€‚ \n\nå¹´ä¸­çš„æ—¶å€™ä»å¹¿å·æ¬åˆ°äº†æ·±åœ³ï¼Œå¼€å‘çš„é¡¹ç›®ä¹Ÿä»ç”µå•†æ¢æˆäº†ç¤¾äº¤ã€‚\n\nè®¤è¯†äº†ä¸€äº›æ–°æœ‹å‹ï¼Œä¹Ÿä¸ä¸€äº›äººä¸å†è”ç³»ã€‚\n\nä»Šå¹´å¸Œæœ›å¥½å¥½å……å®è‡ªå·±ï¼Œå»æ‰ä¸€äº›å¤šä½™çš„è£…é¥°ï¼Œå·¥ä½œä¸ç”Ÿæ´»åªéœ€è¦ç®€å•ã€å®ç”¨ä¸èˆ’é€‚ã€‚\n\nå› æ­¤ï¼Œè¿™æ¬¡æ”¹ç‰ˆï¼Œæˆ‘å¸Œæœ›ç•Œé¢èƒ½æ›´æ¸…çˆ½ã€äº¤äº’ä½“éªŒæ›´å¥½ã€‚\n\n\n### æŠ€æœ¯æ¶æ„\n\nvue + koa2\n\n\n## é‡åˆ°çš„å‘\n\n### åŸç”Ÿå®ç°æœ¬åœ°JSONæ–‡ä»¶çš„è¯»å†™\n\nä¸çŸ¥æ˜¯ä¸æ˜¯æ¢æˆkoaæ¡†æ¶å¼€å‘çš„åŸå› ï¼Œlowdbä¹‹å‰åœ¨2.0çš„æ—¶å€™è¿˜ç”¨å¾—å¥½å¥½çš„ï¼Œåˆ°3.0å¼€å‘çš„æ—¶å€™ï¼Œåˆ é™¤apiå°±ä¸€ç›´æ— æ•ˆï¼Œä½¿ç”¨ `read()`åˆ·æ–°ç¼“å­˜ä¹Ÿè¿˜æ˜¯ä¸è¡Œï¼Œæ— è§£äº†ã€‚\n\nå› æ­¤è¿˜æ˜¯è‡ªå·±å®ç°äº†æ–‡ä»¶çš„è¯»å†™ï¼Œå¥½åœ¨æ•°æ®æ ¼å¼æ¯”è¾ƒç®€å•ï¼Œå®ç°èµ·æ¥ä¹Ÿå®¹æ˜“ã€‚\n\nä»¥ä¸‹æ˜¯ä»£ç ï¼š\n\n```\nconst fs = require('fs');\n\n// è¯»å–æ–‡ä»¶\nfunction getFile(path = 'list') {\n    let filePath = 'data/' + path + '.json'\n    return JSON.parse(fs.readFileSync(filePath))\n}\n\n// å†™å…¥æ–‡ä»¶\nfunction postFile(path = 'list', req) {\n    let filePath = 'data/' + path + '.json';\n    fs.writeFileSync(filePath, JSON.stringify(req));\n}\n\n// åˆ é™¤æ–‡ä»¶\nfunction deleteFile(id) {\n    let filePath = 'data/' + id + '.json';\n    fs.unlinkSync(filePath);\n}\n```\n\n\n### ç¬¬ä¸‰æ–¹å›¾åºŠä¸æœ¬åœ°å­˜å›¾çš„é€‰æ‹©\n\nä¸ƒç‰›çš„å¤–é“¾å›¾å…¨æŒ‚äº†ï¼Œè¿›åå°éƒ½ä¸‹è½½ä¸äº†, å“­æ­»â€¦â€¦\n\nç”¨äº†é˜¿é‡Œäº‘OSSæœ‰æ€•ä¸å°å¿ƒæµé‡è¿‡å¤§æ¶ˆè´¹ä¸èµ·ï¼Œæˆ˜æˆ˜å…¢å…¢â€¦â€¦\n\næœ€åè¿˜æ˜¯å†³å®šè‡ªå·±å®ç°æœ¬åœ°å­˜å›¾åŠŸèƒ½ï¼Œä¹Ÿè®¸ä»¥åæœ‰é—²é’±å¯ä»¥ä¹°ä¸ªæœåŠ¡å™¨è·‘Nodeäº†å‘¢ğŸ¤£\n\n```\n// ä¸Šä¼ å›¾ç‰‡\n\nconst upload = async (ctx, next) => {\n    const req = ctx.request.body;\n    ctx.status = 200;\n    let base64Data = req.base64.replace(/^data:image\\/\\w+;base64,/, \"\");\n    let dataBuffer = new Buffer(base64Data, 'base64');\n    let fileType = req.base64.match(/^data:image\\/\\w+;/)[0];\n    fileType = fileType.split('/')[1].replace(';', '');\n    let filleName = Date.now();\n    let filePath = 'public/uploads/' + filleName + '.' + fileType\n    fs.writeFile(filePath, dataBuffer, function (err) {\n        console.log(err);\n    });\n    ctx.body = {\n        message: \"ä¸Šä¼ æˆåŠŸ\",\n        id: filleName + '.' + fileType\n    }\n}\n```\n\n## å¾…ä¼˜åŒ–çš„åŠŸèƒ½\n\n1. ç‚¹å‡»å›¾ç‰‡æŸ¥çœ‹å¤§å›¾\n\n\n\n","lasttime":1547547943013}