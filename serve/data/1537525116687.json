{"id":"1537525116687","title":"vue列表数据倒计时存在的一些坑","tags":["倒计时","Vue"],"content":"vue 列表数据倒计时，在页面销毁前需要清除定时器，否着会报错。\n\n```javascript\n  export default {\n    data() {\n      return {\n        list: []\n      }\n    },\n    mounted() {\n      for (let i in this.list) {\n        this.countDown(i)\n      }\n    },\n    destroyed() {\n      for (let i in this.list) {\n        clearInterval(this.list[i].countDownFn);\n      }\n    },\n    methods: {\n      formatTime(s) {\n        let Day = parseInt(s / 60 / 60 / 24, 10)\n        let Hour = parseInt(s / 60 / 60 % 24, 10)\n        let Minute = parseInt(s / 60 % 60, 10)\n        let Second = parseInt(s % 60, 10)\n        let res = {\n          d: Day,\n          h: (Hour + \"\").padStart(2, \"0\"),\n          m: (Minute + \"\").padStart(2, \"0\"),\n          s: (Second + \"\").padStart(2, \"0\")\n        }\n        return res;\n      },\n      countDown(i) {\n        let item = this.list[i]\n        this.list[i].countDownFn = setInterval(() => {\n          item.time_remaining -= 1\n          if (item.time_remaining <= 0) {\n            clearInterval(this.list[i].countDownFn);\n          } else {\n            item.countDownTime = item.time_remaining > 0 ? this.formatTime(item.time_remaining) : {}\n          }\n        }, 1000);\n      }\n    }\n  }\n```","lasttime":1546852977367}