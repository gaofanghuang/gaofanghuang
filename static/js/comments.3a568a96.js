(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["comments"],{"0629":function(e,t,n){},"0bef":function(e,t,n){"use strict";n.r(t);var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comments-wrap"},[n("div",{staticClass:"comments-banner flex flex-x flex-y"},[e._v(" Comments ")]),n("div",{staticClass:"comment-container"},[e.canComment?n("CommentInpBox",{on:{refresh:function(t){return e.onRefresh()}}}):e._e(),n("div",{staticClass:"comment-list"},[n("div",{staticClass:"comment-list-title"},[e._v("Lastest Comments")]),n("LoadMore",{on:{onRefresh:e.onRefresh,onLoadMore:e.onLoadMore}},[n("transition-group",{attrs:{name:"fadeIn"}},e._l(e.list,(function(e){return n("CommentItem",{key:e._id,attrs:{item:e}})})),1)],1)],1)],1)])},i=[],a=(n("a4d3"),n("99af"),n("4de4"),n("4160"),n("e439"),n("dbb4"),n("b64b"),n("159b"),n("2909")),o=n("ade3"),s=n("7424"),c=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-input-wrap"},[n("div",{staticClass:"comment-user-info"},[n("div",{staticClass:"comment-user-info-item comment-input-username"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userName,expression:"userName"}],attrs:{type:"text",placeholder:"请输入您的昵称*",required:""},domProps:{value:e.userName},on:{input:function(t){t.target.composing||(e.userName=t.target.value)}}})]),n("div",{staticClass:"comment-user-info-item comment-input-useremail"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userEmail,expression:"userEmail"}],attrs:{type:"text",placeholder:"请输入您的邮箱*",required:""},domProps:{value:e.userEmail},on:{input:function(t){t.target.composing||(e.userEmail=t.target.value)}}})]),n("div",{staticClass:"comment-user-info-item comment-input-usersite"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userSite,expression:"userSite"}],attrs:{type:"text",placeholder:"请输入您的站名"},domProps:{value:e.userSite},on:{input:function(t){t.target.composing||(e.userSite=t.target.value)}}})]),n("div",{staticClass:"comment-user-info-item comment-input-userurl"},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.userUrl,expression:"userUrl"}],attrs:{type:"text",placeholder:"请输入您的站址"},domProps:{value:e.userUrl},on:{input:function(t){t.target.composing||(e.userUrl=t.target.value)}}})])]),n("div",{staticClass:"comment-input-box"},[n("textarea",{directives:[{name:"model",rawName:"v-model",value:e.content,expression:"content"}],attrs:{placeholder:"请输入评论内容*（支持markdown格式）",spellcheck:"false",autocapitalize:"off",autocomplete:"off",autocorrect:"off"},domProps:{value:e.content},on:{input:function(t){t.target.composing||(e.content=t.target.value)}}}),n("div",{directives:[{name:"loading",rawName:"v-loading",value:!e.canSubmit,expression:"!canSubmit"}],staticClass:"comment-input-submit flex flex-x flex-y",on:{click:e.submitComment}},[n("span",[e._v("提交评论")])])])])},u=[],m={isEmpty:function(e){return"undefined"===typeof e||null==e||""===e},isUrl:function(e){var t=/^([hH][tT]{2}[pP]:\/\/|[hH][tT]{2}[pP][sS]:\/\/)(([A-Za-z0-9-~]+)\.)+([A-Za-z0-9-~/])+$/;return t.test(e)},isEmail:function(e){var t=/^[a-zA-Z0-9_.-]+@[a-zA-Z0-9-]+(\.[a-zA-Z0-9-]+)*\.[a-zA-Z0-9]{2,6}$/;return t.test(e)},isPhone:function(e){var t=/^(((13[0-9]{1})|(14[0-9]{1})|(15[0-9]{1})|(16[0-9]{1})|(17[0-9]{1})|(18[0-9]{1})|(19[0-9]{1})|)+\d{8})$/;return e&&11===e.length&&t.test(e)}},l=m,f=n("cb98"),d={data:function(){return{userName:"",userEmail:"",userSite:"",userUrl:"",content:"",canSubmit:!0}},methods:{submitComment:function(){var e=this;if(this.checkForm()){if(!this.canSubmit)return;this.canSubmit=!1;var t={userName:this.userName,userEmail:this.userEmail,userSite:this.userSite,userUrl:this.userUrl,content:this.content};s["m"](t).then((function(t){var n=t.data;n.code&&(e.userName="",e.userEmail="",e.userSite="",e.userUrl="",e.content="",e.$emit("refresh"),f["a"].success("提交评论成功"),e.canSubmit=!0)}))}},checkForm:function(){return this.userName?this.userName.length>20?(f["a"].error("昵称长度不能超过20个字符"),!1):this.userEmail?l.isEmail(this.userEmail)?this.userSite.length>20?(f["a"].error("站名长度不能超过20个字符"),!1):this.userUrl&&!l.isUrl(this.userUrl)?(f["a"].error("站址格式不正确"),!1):!!this.content||(f["a"].error("请输入评论内容"),!1):(f["a"].error("邮箱格式不正确"),!1):(f["a"].error("请输入您的邮箱"),!1):(f["a"].error("请输入您的昵称"),!1)}}},v=d,p=(n("724d"),n("2877")),h=Object(p["a"])(v,c,u,!1,null,null,null),b=h.exports,g=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"comment-item-wrap"},[n("div",{staticClass:"comment-item-info"},[n("div",{staticClass:"comment-item-user"},[n("div",{staticClass:"comment-item-user-name"},[e._v(e._s(e.item.userName))]),e.item.userUrl?n("div",{staticClass:"comment-item-user-site"},[n("a",{attrs:{href:e.item.userUrl,target:"_blank"}},[e._v(e._s(e.item.userSite||e.item.userName))])]):e._e()]),n("div",{staticClass:"comment-item-time"},[e._v(e._s(e._f("time2tips")(e.item.updated_time)))])]),n("div",{staticClass:"comment-item-content markdown-view",domProps:{innerHTML:e._s(e.content)}}),e.item.reply?n("div",{staticClass:"comment-item-reply"},[n("div",{staticClass:"comment-reply-user"},[e._v("Gaofang 回复于 "+e._s(e._f("time2tips")(e.item.reply_time))+":")]),n("div",{staticClass:"comment-item-reply-content markdown-view",domProps:{innerHTML:e._s(e.reply)}})]):e._e()])},w=[],y=n("6026"),C={computed:{content:function(){return this.item&&this.item.content?Object(y["a"])(this.item.content):""},reply:function(){return this.item&&this.item.reply?Object(y["a"])(this.item.reply):""}},props:{item:{type:Object,default:null}}},_=C,O=(n("2d71"),Object(p["a"])(_,g,w,!1,null,null,null)),x=O.exports,j=n("eafa"),S=n("2f62");function E(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function P(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?E(Object(n),!0).forEach((function(t){Object(o["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var N={data:function(){return{list:[],page:1,showSize:10}},components:{CommentInpBox:b,CommentItem:x,LoadMore:j["a"]},computed:P({},Object(S["b"])(["canComment"])),methods:{onRefresh:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n={page:1,showSize:this.showSize};s["d"](n).then((function(n){var r=n.data;if(r.code){var i=r.data;e.list=i,t(i.length,e.showSize)}}))},onLoadMore:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:function(){},n={page:this.page+1,showSize:this.showSize};s["d"](n).then((function(n){var r=n.data;if(r.code){e.page=e.page+1;var i=r.data;e.list=[].concat(Object(a["a"])(e.list),Object(a["a"])(i)),t(i.length,e.showSize)}}))}}},M=N,A=(n("ff9e"),Object(p["a"])(M,r,i,!1,null,null,null));t["default"]=A.exports},2909:function(e,t,n){"use strict";function r(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}n("a4d3"),n("e01a"),n("d28b"),n("a630"),n("e260"),n("d3b7"),n("25f0"),n("3ca3"),n("ddb0");function i(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}function a(){throw new TypeError("Invalid attempt to spread non-iterable instance")}function o(e){return r(e)||i(e)||a()}n.d(t,"a",(function(){return o}))},"2d71":function(e,t,n){"use strict";var r=n("0629"),i=n.n(r);i.a},"4df4":function(e,t,n){"use strict";var r=n("0366"),i=n("7b0b"),a=n("9bdd"),o=n("e95a"),s=n("50c4"),c=n("8418"),u=n("35a1");e.exports=function(e){var t,n,m,l,f,d,v=i(e),p="function"==typeof this?this:Array,h=arguments.length,b=h>1?arguments[1]:void 0,g=void 0!==b,w=u(v),y=0;if(g&&(b=r(b,h>2?arguments[2]:void 0,2)),void 0==w||p==Array&&o(w))for(t=s(v.length),n=new p(t);t>y;y++)d=g?b(v[y],y):v[y],c(n,y,d);else for(l=w.call(v),f=l.next,n=new p;!(m=f.call(l)).done;y++)d=g?a(l,b,[m.value,y],!0):m.value,c(n,y,d);return n.length=y,n}},"5f28":function(e,t,n){"use strict";var r=n("636c"),i=n.n(r);i.a},"636c":function(e,t,n){},"724d":function(e,t,n){"use strict";var r=n("8da1"),i=n.n(r);i.a},"8da1":function(e,t,n){},"99af":function(e,t,n){"use strict";var r=n("23e7"),i=n("d039"),a=n("e8b5"),o=n("861d"),s=n("7b0b"),c=n("50c4"),u=n("8418"),m=n("65f0"),l=n("1dde"),f=n("b622"),d=n("2d00"),v=f("isConcatSpreadable"),p=9007199254740991,h="Maximum allowed index exceeded",b=d>=51||!i((function(){var e=[];return e[v]=!1,e.concat()[0]!==e})),g=l("concat"),w=function(e){if(!o(e))return!1;var t=e[v];return void 0!==t?!!t:a(e)},y=!b||!g;r({target:"Array",proto:!0,forced:y},{concat:function(e){var t,n,r,i,a,o=s(this),l=m(o,0),f=0;for(t=-1,r=arguments.length;t<r;t++)if(a=-1===t?o:arguments[t],w(a)){if(i=c(a.length),f+i>p)throw TypeError(h);for(n=0;n<i;n++,f++)n in a&&u(l,f,a[n])}else{if(f>=p)throw TypeError(h);u(l,f++,a)}return l.length=f,l}})},a630:function(e,t,n){var r=n("23e7"),i=n("4df4"),a=n("1c7e"),o=!a((function(e){Array.from(e)}));r({target:"Array",stat:!0,forced:o},{from:i})},ade3:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))},b64b:function(e,t,n){var r=n("23e7"),i=n("7b0b"),a=n("df75"),o=n("d039"),s=o((function(){a(1)}));r({target:"Object",stat:!0,forced:s},{keys:function(e){return a(i(e))}})},dbb4:function(e,t,n){var r=n("23e7"),i=n("83ab"),a=n("56ef"),o=n("fc6a"),s=n("06cf"),c=n("8418");r({target:"Object",stat:!0,sham:!i},{getOwnPropertyDescriptors:function(e){var t,n,r=o(e),i=s.f,u=a(r),m={},l=0;while(u.length>l)n=i(r,t=u[l++]),void 0!==n&&c(m,t,n);return m}})},e439:function(e,t,n){var r=n("23e7"),i=n("d039"),a=n("fc6a"),o=n("06cf").f,s=n("83ab"),c=i((function(){o(1)})),u=!s||c;r({target:"Object",stat:!0,forced:u,sham:!s},{getOwnPropertyDescriptor:function(e,t){return o(a(e),t)}})},eafa:function(e,t,n){"use strict";var r=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"loadmore-wrap"},[n("div",{staticClass:"loadmore-content"},[n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.refresh,expression:"refresh"}]}),e._t("default")],2),e.showFooter?n("div",{staticClass:"loadmore-footer"},[e.noMore?n("div",{staticClass:"no-more"},[e._v("没有更多了")]):e._e(),e.noMore?e._e():n("div",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],staticClass:"loadmore-btn",on:{click:function(t){return e.loadMore()}}},[n("span",[e._v("加载更多")])])]):e._e()])},i=[],a={data:function(){return{refresh:!1,showFooter:!1,noMore:!1,loading:!1}},created:function(){this.refreshData()},methods:{refreshData:function(){var e=this;this.refresh=!0,this.$emit("onRefresh",(function(t,n){e.noMore=t<n,e.showFooter=!0,e.refresh=!1}),!0)},loadMore:function(){var e=this;this.noMore||(this.loading=!0,this.$emit("onLoadMore",(function(t,n){e.loading=!1,setTimeout((function(){e.noMore=t<n}),300)})))}}},o=a,s=(n("5f28"),n("2877")),c=Object(s["a"])(o,r,i,!1,null,null,null);t["a"]=c.exports},f23d:function(e,t,n){},ff9e:function(e,t,n){"use strict";var r=n("f23d"),i=n.n(r);i.a}}]);